use midTermDB;
-- 暫時禁用外鍵約束
SET foreign_key_checks = 0;

-- Gyms假資料加入
INSERT INTO Gyms (gym_name, gym_subtitle, gym_address, gym_phone, business_hours, gym_info, gym_price, gym_equipment, is_elderly, latitude, longitude) VALUES
('卓越健身中心', '追求卓越，超越自我', '台北市大安區敦化南路二段333號', '02-2700-1234', '週一至週日 06:00-22:00', '卓越健身中心提供最先進的健身設備和專業的教練團隊，幫助您實現健康目標。', '單次體驗NT$500, 月費NT$2,000起', '跑步機、單車、重量訓練區、瑜伽室', FALSE, 25.026769, 121.548427),
('活力運動館', '激發你的運動潛能', '台北市信義區松仁路123號', '02-2723-5678', '週一至週日 07:00-23:00', '活力運動館擁有寬敞的空間和多樣化的課程，是您健身的最佳選擇。', '日票NT$350, 季票NT$5,500', '游泳池、壁球場、團體課教室', FALSE, 25.036429, 121.568059),
('健康一身館', '全方位的健康管理', '台北市中山區南京東路三段219號', '02-2504-9876', '週一至週六 08:00-21:00', '健康一身館注重整體健康，提供營養諮詢和體適能評估服務。', '月費NT$1,800, 年費NT$18,000', '有氧區、重訓區、SPA', TRUE, 25.052361, 121.544277),
('勁爆運動中心', '釋放你的運動能量', '新北市板橋區民生路三段256號', '02-2956-3333', '週一至週日 06:30-22:30', '勁爆運動中心擁有最新的健身器材，讓您的每次訓練都充滿樂趣。', '單次NT$400, 半年NT$9,000', '拳擊區、功能性訓練區、飛輪教室', FALSE, 25.014105, 121.474453),
('悠活健身俱樂部', '享受運動的樂趣', '台中市西屯區台灣大道三段99號', '04-2310-1234', '週一至週日 07:00-23:00', '悠活健身俱樂部提供舒適的環境和多元化的課程，讓健身成為生活的一部分。', '月費NT$2,200, 團體課每堂NT$350', '瑜伽室、飛輪教室、重量訓練區', TRUE, 24.165160, 120.643453),
('極限體能館', '挑戰你的極限', '高雄市前鎮區中山二路2號', '07-3333-5678', '週一至週日 24小時營業', '極限體能館是高強度訓練愛好者的天堂，提供最具挑戰性的器材和課程。', '單次NT$450, 年費NT$24,000', 'CrossFit區、攀岩牆、跑酷區', FALSE, 22.612387, 120.300538),
('陽光運動中心', '在陽光下舒展身心', '台南市東區中華東路三段358號', '06-2090-9999', '週二至週日 09:00-21:00', '陽光運動中心擁有戶外訓練場地，讓您在自然環境中享受運動的樂趣。', '日票NT$300, 月票NT$2,500', '室外跑道、網球場、健身房', TRUE, 22.982880, 120.233654),
('巔峰健身館', '攀登健康巔峰', '新竹市東區光復路二段101號', '03-5715-4321', '週一至週五 06:00-22:00, 週六至週日 08:00-20:00', '巔峰健身館擁有經驗豐富的私人教練團隊，幫助您達成個人健身目標。', '單次NT$380, 季費NT$6,800', '重訓區、有氧區、私人教練區', FALSE, 24.801340, 120.974348),
('自然律動瑜伽館', '與自然共舞', '宜蘭市中山路三段208號', '03-9333-7777', '週一至週六 10:00-20:00', '自然律動瑜伽館提供多種瑜伽課程，幫助您放鬆身心、增強體質。', '單堂課NT$400, 月無限卡NT$3,200', '瑜伽教室、冥想室、更衣室', TRUE, 24.754712, 121.753796),
('動感單車館', '騎出健康人生', '桃園市桃園區中正路100號', '03-3370-5656', '週一至週日 07:00-22:00', '動感單車館擁有最先進的飛輪車，讓您體驗刺激有趣的騎行課程。', '單車課NT$350, 月卡NT$2,800', '飛輪教室、有氧區、淋浴間', FALSE, 24.989911, 121.312094),
('強身健體中心', '塑造完美體態', '新北市新店區北新路三段65號', '02-2912-3456', '週一至週日 06:00-23:00', '強身健體中心提供個人化的健身計劃，幫助您達成理想的身材目標。', '單次NT$420, 半年NT$10,000', '重量訓練區、有氧區、體適能測試區', FALSE, 24.967401, 121.542569),
('靈活瑜伽工作室', '找回身體的靈活', '台中市北區三民路三段161號', '04-2229-8765', '週二至週日 09:30-21:30', '靈活瑜伽工作室專注於各種瑜伽流派，適合不同程度的學員。', '單堂NT$450, 10堂課NT$4,000', '瑜伽教室、冥想區、休息區', TRUE, 24.150941, 120.684255),
('勇者健身房', '成為自己的英雄', '高雄市三民區博愛一路345號', '07-3803-2222', '週一至週日 24小時營業', '勇者健身房鼓勵每個人挑戰自我，提供多樣化的訓練設備和課程。', '日票NT$380, 年費NT$20,000', '功能性訓練區、重訓區、拳擊區', FALSE, 22.647560, 120.299843),
('舒活運動生活館', '讓運動融入生活', '台南市北區公園路467號', '06-2814-7890', '週一至週六 07:00-21:00', '舒活運動生活館注重生活品質，提供全方位的健康管理服務。', '月費NT$2,300, 季費NT$6,500', '游泳池、健身房、SPA區', TRUE, 23.001616, 120.212299),
('極速健身中心', '加速你的健身成果', '新竹市北區經國路一段430號', '03-5339-6543', '週一至週日 06:00-22:00', '極速健身中心擁有高效率的訓練方案，幫助您在最短時間內看到成果。', '單次NT$400, 月費NT$2,600', 'HIIT區、跑步機區、重訓區', FALSE, 24.808038, 120.967392),
('元氣運動館', '補充滿滿元氣', '台北市內湖區成功路四段188號', '02-2792-1357', '週一至週日 08:00-22:00', '元氣運動館提供充滿活力的環境，讓您在運動中找到樂趣和動力。', '單次NT$350, 季票NT$6,000', '有氧區、重訓區、舞蹈教室', FALSE, 25.083946, 121.594723),
('肌力工廠', '打造強健體魄', '新北市中和區中山路三段118號', '02-2226-7788', '週一至週五 06:00-23:00, 週六至週日 08:00-22:00', '肌力工廠專注於重量訓練，幫助您增加肌肉量、提高代謝率。', '單次NT$450, 半年NT$11,000', '自由重量區、機械訓練區、核心訓練區', FALSE, 24.998702, 121.498591),
('曲線美人館', '雕塑完美身材', '台中市南屯區公益路二段51號', '04-2320-9876', '週一至週六 10:00-20:00', '曲線美人館專為女性設計，提供溫和有效的塑身課程。', '單堂課NT$500, 20堂課NT$8,000', '皮拉提斯教室、有氧舞蹈室、TRX訓練區', TRUE, 24.151380, 120.646853),
('動力飛輪中心', '騎出你的熱情', '高雄市左營區博愛二路777號', '07-3453-2109', '週一至週日 07:00-22:00', '動力飛輪中心擁有最新型的飛輪車，提供多種強度的課程。', '單車課NT$400, 月無限卡NT$3,500', '飛輪教室、心率監控系統、淋浴間', FALSE, 22.686731, 120.303256),
('健美塑身工作室', '打造完美體態', '台南市安平區永華路二段248號', '06-2989-3210', '週二至週日 09:00-21:00', '健美塑身工作室提供個人化的塑身計劃，幫助您達成理想體態。', '單次NT$600, 12次課程NT$6,000', '重訓區、有氧區、體態分析室', TRUE, 22.991251, 120.184341),
('運動醫學中心', '科學化的運動處方', '桃園市中壢區中大路300號', '03-4227-8901', '週一至週五 08:30-17:30', '運動醫學中心結合醫學和運動科學，為您提供最適合的運動建議。', '諮詢NT$1,500, 客製化方案NT$10,000起', '檢測實驗室、復健區、運動處方諮詢室', TRUE, 24.967758, 121.195425),
('全方位健身俱樂部', '360度全面提升', '新竹市東區光復路一段575號', '03-5725-4680', '週一至週日 06:00-23:00', '全方位健身俱樂部提供多元化的運動設施，滿足各種健身需求。', '日票NT$500, 年費NT$25,000', '游泳池、網球場、健身房、SPA', FALSE, 24.801226, 120.995972),
('核心力量館', '強化你的核心', '台北市松山區南京東路五段250號', '02-2756-9012', '週一至週六 07:00-22:00', '核心力量館專注於核心肌群訓練，幫助您改善姿勢、增強平衡力。', '單次NT$400, 月費NT$3,000', '瑜伽室、pilates教室、功能性訓練區', TRUE, 25.052111, 121.560128),
('活力泳健中心', '游出健康活力', '新北市三重區重新路一段108號', '02-2980-1234', '週一至週日 06:00-22:00', '活力泳健中心擁有標準游泳池和完善的健身設施，是游泳愛好者的首選。', '單次NT$250, 月票NT$2,800', '游泳池、SPA、健身房', FALSE, 25.063784, 121.495602),
('舞動人生工作室', '舞出精彩人生', '台中市西區公益路155號', '04-2328-5678', '週一至週六 10:00-22:00', '舞動人生工作室提供多種舞蹈課程，讓您在音樂中享受運動的樂趣。', '單堂課NT$350, 月卡NT$3,200', '舞蹈教室、有氧區、休息區', TRUE, 24.151042, 120.663614),
('極限攀岩館', '挑戰自我極限', '高雄市鼓山區臨海二路17號', '07-5613-9999', '週二至週日 13:00-22:00', '極限攀岩館擁有各種難度的攀岩牆，適合初學者到專業攀岩者。', '單次NT$450, 月票NT$3,500', '室內攀岩牆、抱石區、安全裝備租借', FALSE, 22.618676, 120.274902);


-- Features (Gym的類型)
INSERT INTO Features (feature_name) VALUES
('重量訓練'),
('瑜珈伸展'),
('游泳池'),
('芳療按摩'),
('團體課程'),
('私人教練'),
('紅繩核心'),
('皮拉提斯');


-- GymFeatures (多對多連接表) 資料加入
-- 利用 MySQL 的內建函數來生成隨機數據並插入到 GymFeatures 表中
-- 使用一個存儲過程來插入隨機數據。
-- 這個過程會在 gym_id 1 到 30 之間隨機插入 feature_id 1 到 14 的數據，每個 gym 最少1項，最多3項

-- 檢查並刪除現有的存儲過程
DROP PROCEDURE IF EXISTS InsertRandomGymFeatures;

DELIMITER $$

CREATE PROCEDURE InsertRandomGymFeatures()
BEGIN
    DECLARE i INT DEFAULT 1;
    DECLARE j INT;
    DECLARE rand_feature_count INT;
    DECLARE rand_feature_id INT;

    WHILE i <= 30 DO
        SET rand_feature_count = FLOOR(1 + RAND() * 3);  -- 隨機選擇1到3個特徵
        SET j = 0;
        WHILE j < rand_feature_count DO
            REPEAT
                SET rand_feature_id = FLOOR(1 + RAND() * 8);  -- 隨機選擇1到14之間的特徵ID
            UNTIL NOT EXISTS (SELECT 1 FROM GymFeatures WHERE gym_id = i AND feature_id = rand_feature_id)
            END REPEAT;
            INSERT INTO GymFeatures (gym_id, feature_id) VALUES (i, rand_feature_id);
            SET j = j + 1;
        END WHILE;
        SET i = i + 1;
    END WHILE;
END $$

DELIMITER ;
-- 執行存儲過程來插入數據
CALL InsertRandomGymFeatures();


-- GymImages （1對多連接表）資料加入
-- 創建臨時表來存儲gym_id和照片名稱的組合
CREATE TEMPORARY TABLE temp_gym_images (
    gym_id INT,
    image_filename VARCHAR(255)
);

-- 插入1-30的gym_id,確保每個id至少出現一次
INSERT INTO temp_gym_images (gym_id, image_filename)
SELECT 
    n,
    CONCAT('gym', n, '.jpg')
FROM 
    (SELECT 1 AS n UNION SELECT 2 UNION SELECT 3 UNION SELECT 4 UNION SELECT 5 UNION SELECT 6 UNION SELECT 7 UNION SELECT 8 UNION SELECT 9 UNION SELECT 10
     UNION SELECT 11 UNION SELECT 12 UNION SELECT 13 UNION SELECT 14 UNION SELECT 15 UNION SELECT 16 UNION SELECT 17 UNION SELECT 18 UNION SELECT 19 UNION SELECT 20
     UNION SELECT 21 UNION SELECT 22 UNION SELECT 23 UNION SELECT 24 UNION SELECT 25 UNION SELECT 26 UNION SELECT 27 UNION SELECT 28 UNION SELECT 29 UNION SELECT 30) numbers
ORDER BY RAND()
LIMIT 30;

-- 插入剩餘的2張照片,隨機分配給1-30的gym_id
INSERT INTO temp_gym_images (gym_id, image_filename)
SELECT 
    FLOOR(1 + (RAND() * 30)),
    CONCAT('gym', n, '.jpg')
FROM 
    (SELECT 31 AS n UNION SELECT 32) numbers
ORDER BY RAND();

-- 將數據從臨時表插入到實際的表中
INSERT INTO GymImages (gym_id, image_filename, image_description)
SELECT 
    gym_id,
    image_filename,
    CONCAT('Description for ', image_filename)
FROM 
    temp_gym_images
ORDER BY RAND();

-- 刪除臨時表
DROP TEMPORARY TABLE temp_gym_images;
desc GymImages;
select * from GymImages;


-- 重新啟用外鍵約束
SET foreign_key_checks = 1;